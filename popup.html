<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ronin Labels</title>
  <style>
    body { min-width: 320px; font: 13px/1.4 -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Arial, sans-serif; padding: 12px; }
    .row { margin: 8px 0; }
    input[type="text"], input[type="url"] { width: 100%; box-sizing: border-box; padding: 6px 8px; }
    .muted { color: #555; font-size: 12px; }
    .actions { display: flex; gap: 8px; }
    #msg { margin-top: 6px; color: #2e7d32; }
    #error { margin-top: 6px; color: #c62828; }
    #detectedRow { margin-bottom: 4px; }
    #detected { font-weight: 600; word-break: break-all; }
    /* Search dropdown panel */
    .search-row { position: relative; }
    .search-toggle { position: absolute; right: 4px; top: 4px; padding: 4px 6px; font-size: 12px; }
    .search-panel { position: absolute; left: 0; right: 0; top: 36px; background: #fff; border: 1px solid #ddd; border-radius: 6px; box-shadow: 0 8px 24px rgba(0,0,0,0.12); max-height: 260px; overflow: auto; z-index: 1000; }
    .search-item { display: flex; align-items: center; justify-content: space-between; gap: 8px; padding: 6px 8px; border-bottom: 1px solid #f6f6f6; }
    .search-item .meta { display: flex; flex-direction: column; }
    .search-item .addr { font-family: monospace; color: #555; word-break: break-all; }
    .search-item .addr .addr-text { cursor: pointer; }
    .search-item .addr .copy-icon { display: inline-block; margin-left: 6px; cursor: pointer; }
    .search-item .addr .copy-icon svg { vertical-align: text-bottom; color: #666; }
    .search-item .addr .copy-icon:hover svg { color: #111; }
    .search-item .addr .copied-text { margin-left: 6px; color: #2e7d32; font-size: 12px; }
  </style>
</head>
<body>
  <div class="row">
    <label class="muted"><input id="manualToggle" type="checkbox"> Enter address manually</label>
  </div>
  <div class="row">
    <input id="addrInput" type="text" placeholder="0x..." />
  </div>

  <div class="row">
    <input id="label" type="text" placeholder="Enter label" />
  </div>
  <div class="row">
    <textarea id="note" placeholder="Enter note (optional)" rows="3" style="width:100%; box-sizing:border-box; padding:6px 8px;"></textarea>
  </div>
  <div class="actions">
    <button id="save">Save</button>
    <button id="delete" title="Remove existing label">Delete</button>
  </div>
  <div id="msg"></div>
  <div id="error"></div>

  <!-- Search by label -->
  <div class="row muted">Search by label</div>
  <div class="row search-row" id="searchRow">
    <input id="searchLabel" type="text" placeholder="Search label…" />
    <button id="openSearchPanel" class="search-toggle" title="Toggle search results" type="button">▼</button>
    <div id="searchPanel" class="search-panel" style="display:none;">
      <div id="searchPanelResults"></div>
    </div>
  </div>

  <!-- OSINT quick-links (dynamic) -->
  <div class="row muted">OSINT</div>
  <div id="osintButtons" class="row" style="display:flex; flex-wrap:wrap; gap:8px;"></div>

  <hr style="margin:12px 0; border:none; border-top:1px solid #eee;">
  <div class="row muted">Import/Export</div>
  <div class="row" style="display:flex; gap:8px; align-items:center;">
    <label class="muted">Format
      <select id="format" style="margin-left:6px;">
        <option value="json" selected>JSON</option>
        <option value="csv">CSV</option>
      </select>
    </label>
    <button id="exportBtn" style="margin-left:auto;">Export</button>
    <button id="importBtn">Import</button>
    <input id="fileInput" type="file" accept=".json,.csv,text/csv,application/json" style="display:none;" />
  </div>

  <hr style="margin:12px 0; border:none; border-top:1px solid #eee;">
  <div class="row muted">OSINT sources</div>
  <div id="osintList" class="row"></div>
  <div class="row" style="display:flex; gap:8px;">
    <input id="osintName" type="text" placeholder="Site name (e.g., Arkham)">
    <input id="osintPattern" type="text" placeholder="Sample URL (paste any address URL, e.g., https://intel.arkm.com/explorer/address/0x…)">
  </div>
  <div class="actions">
    <button id="osintAddBtn">Add source</button>
  </div>

  <script src="utils.js"></script>
  <script src="popup.js"></script>
</body>
</html>